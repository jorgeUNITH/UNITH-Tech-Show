<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lead Generation</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');

    /* ===== Layout base ===== */
    html, body { height: auto; } /* deja que crezca para que haya scroll */
    body {
      font-family: 'Inter', sans-serif;
      min-height: 100vh;
      margin: 0;
      background: linear-gradient(rgb(239, 246, 255) 0%, rgba(59, 130, 246, 0.5) 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;   /* evita anclar al alto del viewport */
      padding: 1rem;
      overflow-y: auto;               /* scroll cuando haga falta */
    }

    /* ===== Teléfonos: flexibles por ALTO del viewport ===== */
    .phone-frame {
      position: relative;
      height: min(78vh, 600px);
      width: auto;
      aspect-ratio: 320 / 600;
      max-width: 90vw;
      border: 12px solid #1f2937;
      border-radius: 40px;
      box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04);
      overflow: hidden;
      background-color: #000;
      /* sin transición para que ambos se ajusten a la vez */
    }
    .phone-frame::before {
      content: '';
      position: absolute; top: 0; left: 50%; transform: translateX(-50%);
      width: 60px; height: 8px; background-color: #1f2937;
      border-bottom-left-radius: 8px; border-bottom-right-radius: 8px;
      z-index: 10;
    }
    .phone-screen { width:100%; height:100%; background:#fff; position:relative; z-index:5; transition: background-color .5s; }
    .phone-off .phone-screen { background:#000; cursor: default !important; }

    .chat-iframe { width: 100%; height: 100%; border: 0; }
    .registration-iframe { width: 100%; height: calc(100vh - 8rem); border: 0; border-radius: .5rem; }

    @media (max-width: 768px) {
      .phone-container { flex-direction: column; }
      .phone-frame {
        margin-bottom: 2rem;
        height: min(75vh, calc(90vw * 1.875));
        width: auto;
        margin-left: auto; margin-right: auto;
      }
    }

    /* ===== Botón flotante (FAB) abajo a la derecha ===== */
    .fab {
      position: fixed;
      right: 1rem;
      bottom: calc(1rem + env(safe-area-inset-bottom, 0));
      z-index: 40; /* modal usa z-50, así el modal queda encima */
      display: inline-flex;
      align-items: center;
      gap: .5rem;
      padding: .875rem 1rem;
      border-radius: 9999px;
      background: #2563eb;         /* blue-600 */
      color: #fff;
      font-weight: 700;
      box-shadow: 0 10px 15px -3px rgba(0,0,0,.1), 0 4px 6px -2px rgba(0,0,0,.05);
      border: 0;
      cursor: pointer;
    }
    .fab:hover { background: #1d4ed8; }          /* blue-700 */
    .fab:focus { outline: none; box-shadow: 0 0 0 4px rgba(59,130,246,.4); }
    @media (prefers-reduced-motion: no-preference) {
      .fab { transition: transform .15s ease, background-color .15s ease, box-shadow .15s ease; }
      .fab:hover { transform: translateY(-2px); }
    }
  </style>
</head>
<body id="appBody">

  <!-- sin h-full y con justify-start para permitir scroll -->
  <div id="main-content" class="w-full flex flex-col items-center justify-start p-4">
    <h1 class="text-4xl font-extrabold text-blue-900 mb-8 mt-4 tracking-tight">Lead Generation</h1>

    <div id="phones-view" class="phone-container flex flex-wrap justify-center items-start gap-8 md:gap-12 transition-opacity duration-500 w-full max-w-6xl">
      <!-- Izquierda: Vídeo -->
      <div id="left-phone" class="phone-frame cursor-pointer hover:shadow-2xl hover:scale-[1.01]">
        <div class="phone-screen p-0">
          <div id="video-content" class="w-full h-full relative rounded-[28px] overflow-hidden">
            <iframe
              width="100%" height="100%"
              src="https://www.youtube.com/embed/veMKN4H_uQI?autoplay=1&mute=1&playsinline=1&controls=0&loop=1&playlist=veMKN4H_uQI&modestbranding=1&rel=0&disablekb=1&enablejsapi=1"
              title="Video Publicitario para META"
              allow="autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              loading="eager">
            </iframe>
            <div class="absolute inset-0 flex justify-center items-center bg-black/40">
              <p class="text-white text-lg font-bold p-3 rounded-lg bg-blue-700/80 shadow-lg text-center">
                Clic para Continuar
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Derecha: Chat -->
      <div id="right-phone" class="phone-frame phone-off">
        <div id="chat-screen" class="phone-screen flex justify-center items-center p-2">
          <p class="text-white text-center text-lg font-light">Móvil en Espera</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Botón flotante (mismo id para reutilizar tu JS) -->
  <button id="data-registration-button"
    class="fab"
    onclick="showRegistrationView()"
    aria-label="Abrir registro de datos">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
      <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </svg>
    Registro de Datos
  </button>

  <!-- Modal de registro -->
  <div id="registration-view" class="fixed inset-0 bg-white/95 backdrop-blur-sm hidden flex-col items-center p-4 md:p-8 z-50 transition-opacity duration-300">
    <div class="w-full max-w-7xl h-full flex flex-col">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-2xl font-bold text-blue-800">Hoja de Registro de Leads</h2>
        <button class="px-6 py-2 bg-red-500 text-white font-semibold rounded-lg shadow-md hover:bg-red-600 transition" onclick="showPhonesView()">Cerrar</button>
      </div>
      <iframe id="registration-iframe" class="registration-iframe flex-grow rounded-lg shadow-xl"
        src="https://docs.google.com/spreadsheets/d/1cMYZ50PkHJy3Mvds6MSXu29JkXkWcFEPvpKufINBzU8/edit?gid=0"
        title="Google Sheet de Registro de Datos" allowfullscreen></iframe>
    </div>
  </div>

  <script>
    let appState = 'phones';
    const leftPhone = document.getElementById('left-phone');
    const rightPhone = document.getElementById('right-phone');
    const chatScreen = document.getElementById('chat-screen');
    const phonesView = document.getElementById('phones-view');
    const registrationView = document.getElementById('registration-view');
    const registrationButton = document.getElementById('data-registration-button');
    const CHAT_URL = "https://chat.unith.ai/Unith-248/hellen-15439?api_key=eabc44486c174b0486c658c4dbd24ce9";

    function startChatFlow() {
      if (appState !== 'phones') return;
      leftPhone.classList.add('phone-off');
      leftPhone.classList.remove('cursor-pointer');
      rightPhone.classList.remove('phone-off');

      const chatIframe = document.createElement('iframe');
      chatIframe.src = CHAT_URL;
      chatIframe.classList.add('chat-iframe');
      chatIframe.title = "Unith AI Chatbot";
      chatIframe.allow = "camera; microphone";

      chatScreen.innerHTML = '';
      chatScreen.appendChild(chatIframe);
      appState = 'chat';
    }

    function showRegistrationView() {
      phonesView.classList.add('hidden');
      registrationButton.classList.add('hidden');   // ← ocultamos el FAB cuando abre el modal
      registrationView.classList.remove('hidden');
      registrationView.classList.add('flex');
      appState = 'registration';
    }

    function showPhonesView() {
      registrationView.classList.add('hidden');
      registrationView.classList.remove('flex');
      phonesView.classList.remove('hidden');
      registrationButton.classList.remove('hidden'); // ← mostramos el FAB al cerrar
      if (appState === 'registration') {
        appState = rightPhone.classList.contains('phone-off') ? 'phones' : 'chat';
      }
    }

    window.onload = function() {
      leftPhone.addEventListener('click', startChatFlow);
    };
  </script>
</body>
</html>
